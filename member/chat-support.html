<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Global Manufacturing Careers - チャットサポート。キャリアコンサルタントとリアルタイムで相談できます。">
    <title>チャットサポート | Global Manufacturing Careers</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .chat-container {
            display: grid;
            grid-template-columns: 250px 350px 1fr;
            gap: 1.5rem;
            margin-top: 2rem;
            height: calc(100vh - 200px);
        }
        
        .sidebar {
            background: var(--bg-color);
            border-radius: var(--border-radius-md);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            height: fit-content;
            position: sticky;
            top: 100px;
        }
        
        .user-profile {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--bg-color-alt);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 2rem;
            color: var(--text-color-medium);
        }
        
        .nav-menu {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .nav-menu li {
            margin-bottom: 0.5rem;
        }
        
        .nav-menu a {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            color: var(--text-color-dark);
            text-decoration: none;
            border-radius: var(--border-radius-sm);
            transition: all 0.3s ease;
        }
        
        .nav-menu a:hover,
        .nav-menu a.active {
            background: var(--accent-color);
            color: var(--text-color-light);
        }
        
        .nav-menu i {
            margin-right: 0.75rem;
            width: 16px;
        }
        
        .chat-list {
            background: var(--bg-color);
            border-radius: var(--border-radius-md);
            box-shadow: var(--box-shadow);
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .chat-list-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .new-chat-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-size: var(--font-size-sm);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .chat-search {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .search-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            font-size: var(--font-size-sm);
        }
        
        .chat-items {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem;
        }
        
        .chat-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: background 0.2s ease;
            margin-bottom: 0.5rem;
        }
        
        .chat-item:hover {
            background: var(--bg-color-alt);
        }
        
        .chat-item.active {
            background: var(--accent-color);
            color: white;
        }
        
        .consultant-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-color-alt);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            position: relative;
        }
        
        .chat-item.active .consultant-avatar {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .online-status {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 12px;
            height: 12px;
            background: var(--success-color);
            border: 2px solid white;
            border-radius: 50%;
        }
        
        .chat-info {
            flex: 1;
            min-width: 0;
        }
        
        .consultant-name {
            font-weight: 500;
            margin-bottom: 0.25rem;
        }
        
        .last-message {
            font-size: var(--font-size-sm);
            color: var(--text-color-medium);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .chat-item.active .last-message {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .chat-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.25rem;
        }
        
        .chat-time {
            font-size: var(--font-size-xs);
            color: var(--text-color-medium);
        }
        
        .chat-item.active .chat-time {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .unread-badge {
            background: var(--error-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-xs);
            font-weight: 500;
        }
        
        .main-chat {
            background: var(--bg-color);
            border-radius: var(--border-radius-md);
            box-shadow: var(--box-shadow);
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .chat-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .current-consultant {
            display: flex;
            align-items: center;
        }
        
        .current-consultant-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--bg-color-alt);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            position: relative;
        }
        
        .consultant-details h3 {
            margin: 0 0 0.25rem;
        }
        
        .consultant-status {
            font-size: var(--font-size-sm);
            color: var(--success-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .typing-indicator {
            font-size: var(--font-size-sm);
            color: var(--text-color-medium);
            font-style: italic;
        }
        
        .chat-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .action-btn {
            background: none;
            border: 1px solid var(--border-color);
            padding: 0.5rem;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            color: var(--text-color-medium);
            transition: all 0.2s ease;
        }
        
        .action-btn:hover {
            background: var(--bg-color-alt);
            border-color: var(--accent-color);
            color: var(--accent-color);
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .message {
            display: flex;
            gap: 0.75rem;
        }
        
        .message.own {
            flex-direction: row-reverse;
        }
        
        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--bg-color-alt);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .message-content {
            max-width: 70%;
        }
        
        .message-bubble {
            background: var(--bg-color-alt);
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            margin-bottom: 0.25rem;
        }
        
        .message.own .message-bubble {
            background: var(--accent-color);
            color: white;
        }
        
        .message-time {
            font-size: var(--font-size-xs);
            color: var(--text-color-medium);
            padding: 0 0.5rem;
        }
        
        .message.own .message-time {
            text-align: right;
        }
        
        .chat-input-area {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-color);
        }
        
        .chat-input-container {
            display: flex;
            gap: 0.75rem;
            align-items: flex-end;
        }
        
        .chat-input {
            flex: 1;
            resize: none;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            padding: 0.75rem;
            max-height: 100px;
            min-height: 40px;
            font-family: inherit;
        }
        
        .chat-attachments {
            display: flex;
            gap: 0.5rem;
        }
        
        .attachment-btn {
            background: none;
            border: 1px solid var(--border-color);
            padding: 0.75rem;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            color: var(--text-color-medium);
            transition: all 0.2s ease;
        }
        
        .attachment-btn:hover {
            background: var(--bg-color-alt);
            border-color: var(--accent-color);
            color: var(--accent-color);
        }
        
        .send-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius-md);
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .send-btn:hover {
            background: var(--accent-light);
        }
        
        .send-btn:disabled {
            background: var(--text-color-medium);
            cursor: not-allowed;
        }
        
        .quick-responses {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .quick-response {
            background: var(--bg-color-alt);
            border: 1px solid var(--border-color);
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            cursor: pointer;
            font-size: var(--font-size-sm);
            transition: all 0.2s ease;
        }
        
        .quick-response:hover {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        
        .chat-welcome {
            text-align: center;
            padding: 3rem;
            color: var(--text-color-medium);
        }
        
        .welcome-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--accent-color);
        }
        
        @media (max-width: 991px) {
            .chat-container {
                grid-template-columns: 250px 1fr;
                height: calc(100vh - 150px);
            }
            
            .chat-list {
                position: fixed;
                left: -350px;
                top: 100px;
                width: 350px;
                height: calc(100vh - 100px);
                z-index: 1000;
                transition: left 0.3s ease;
            }
            
            .chat-list.active {
                left: 0;
            }
            
            .chat-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
            }
            
            .chat-overlay.active {
                display: block;
            }
        }
        
        @media (max-width: 576px) {
            .chat-container {
                grid-template-columns: 1fr;
                margin-top: 1rem;
            }
            
            .sidebar {
                display: none;
            }
            
            .chat-header {
                padding: 1rem;
            }
            
            .chat-input-container {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .chat-attachments {
                order: -1;
                justify-content: center;
            }
        }
        
        /* アニメーション */
        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message {
            animation: messageSlideIn 0.3s ease-out;
        }
        
        .typing-animation {
            display: flex;
            gap: 0.25rem;
            padding: 0.5rem;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text-color-medium);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typingBounce {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- ヘッダー -->
    <header id="site-header">
        <div class="header-container">
            <div class="logo">
                <a href="../index.html">
                    <img src="../images/logo/logo.svg" alt="Global Manufacturing Careers">
                </a>
            </div>
            
            <nav class="global-nav">
                <ul>
                    <li class="has-dropdown">
                        <a href="../jobs/search.html">求人を探す</a>
                        <div class="dropdown-menu">
                            <div class="dropdown-section">
                                <h4>職種別</h4>
                                <ul>
                                    <li><a href="../jobs/search.html?category=engineering">エンジニアリング</a></li>
                                    <li><a href="../jobs/search.html?category=rd">研究開発（R&D）</a></li>
                                    <li><a href="../jobs/search.html?category=production">生産管理</a></li>
                                    <li><a href="../jobs/search.html?category=scm">サプライチェーン</a></li>
                                    <li><a href="../jobs/search.html?category=qaqc">品質管理</a></li>
                                    <li><a href="../jobs/search.html?category=sales">セールス/マーケティング</a></li>
                                </ul>
                            </div>
                            <div class="dropdown-section">
                                <h4>業種別</h4>
                                <ul>
                                    <li><a href="../jobs/search.html?industry=automotive">自動車・輸送機器</a></li>
                                    <li><a href="../jobs/search.html?industry=aerospace">航空宇宙</a></li>
                                    <li><a href="../jobs/search.html?industry=electronics">電機・電子</a></li>
                                    <li><a href="../jobs/search.html?industry=machinery">産業機械</a></li>
                                    <li><a href="../jobs/search.html?industry=chemical">化学・素材</a></li>
                                    <li><a href="../jobs/search.html?industry=medical">医療機器</a></li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li class="has-dropdown">
                        <a href="../services/index.html">転職支援サービス</a>
                        <div class="dropdown-menu">
                            <ul>
                                <li><a href="../services/flow.html">サービスの流れ</a></li>
                                <li><a href="../services/consultants.html">キャリアコンサルタント紹介</a></li>
                                <li><a href="../services/resume_support.html">英文レジュメ添削サービス</a></li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="../knowhow/index.html">外資系・製造業転職ノウハウ</a></li>
                    <li><a href="../success_stories/index.html">転職成功事例</a></li>
                    <li><a href="../recruiters/index.html">企業様へ</a></li>
                </ul>
            </nav>
            
            <div class="header-right">
                <div class="language-switch">
                    <a href="#" class="active">JP</a>
                    <span>|</span>
                    <a href="#">EN</a>
                </div>
                <a href="profile.html" class="btn btn-primary">プロフィール</a>
                <a href="../auth/logout.html" class="btn btn-secondary">ログアウト</a>
            </div>
            
            <button class="hamburger-menu" aria-label="メニュー">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>
    
    <!-- メインコンテンツ -->
    <main>
        <section style="padding: 1rem 0;">
            <div class="container">
                <div class="chat-container">
                    <!-- サイドバー -->
                    <div class="sidebar">
                        <div class="user-profile">
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <h3 style="margin-bottom: 0.25rem;">田中 太郎</h3>
                            <p style="color: var(--text-color-medium); font-size: var(--font-size-sm); margin: 0;">機械設計エンジニア</p>
                        </div>
                        
                        <ul class="nav-menu">
                            <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i>ダッシュボード</a></li>
                            <li><a href="applications.html"><i class="fas fa-file-alt"></i>応募履歴</a></li>
                            <li><a href="scouts.html"><i class="fas fa-star"></i>スカウト</a></li>
                            <li><a href="bookmarks.html"><i class="fas fa-bookmark"></i>お気に入り求人</a></li>
                            <li><a href="ai-matching.html"><i class="fas fa-robot"></i>AIマッチング</a></li>
                            <li><a href="profile.html"><i class="fas fa-user-edit"></i>プロフィール編集</a></li>
                            <li><a href="resume.html"><i class="fas fa-file-pdf"></i>レジュメ管理</a></li>
                            <li><a href="notifications.html"><i class="fas fa-bell"></i>通知設定</a></li>
                            <li><a href="video-meeting.html"><i class="fas fa-video"></i>ビデオ面談</a></li>
                            <li><a href="analytics.html"><i class="fas fa-chart-bar"></i>データ分析</a></li>
                            <li><a href="chat-support.html" class="active"><i class="fas fa-comments"></i>チャットサポート</a></li>
                        </ul>
                    </div>
                    
                    <!-- チャットリスト -->
                    <div class="chat-list" id="chat-list">
                        <div class="chat-list-header">
                            <h3>チャット</h3>
                            <button class="new-chat-btn" onclick="startNewChat()">
                                <i class="fas fa-plus"></i>
                                新規
                            </button>
                        </div>
                        
                        <div class="chat-search">
                            <input type="text" class="search-input" placeholder="コンサルタントを検索...">
                        </div>
                        
                        <div class="chat-items">
                            <div class="chat-item active" onclick="selectChat('consultant1')">
                                <div class="consultant-avatar">
                                    <i class="fas fa-user-tie"></i>
                                    <div class="online-status"></div>
                                </div>
                                <div class="chat-info">
                                    <div class="consultant-name">佐藤 美咲</div>
                                    <div class="last-message">履歴書の添削が完了しました</div>
                                </div>
                                <div class="chat-meta">
                                    <div class="chat-time">14:30</div>
                                    <div class="unread-badge">2</div>
                                </div>
                            </div>
                            
                            <div class="chat-item" onclick="selectChat('consultant2')">
                                <div class="consultant-avatar">
                                    <i class="fas fa-user-tie"></i>
                                    <div class="online-status"></div>
                                </div>
                                <div class="chat-info">
                                    <div class="consultant-name">田村 健一</div>
                                    <div class="last-message">面接対策について相談しましょう</div>
                                </div>
                                <div class="chat-meta">
                                    <div class="chat-time">昨日</div>
                                </div>
                            </div>
                            
                            <div class="chat-item" onclick="selectChat('consultant3')">
                                <div class="consultant-avatar">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div class="chat-info">
                                    <div class="consultant-name">山田 雄介</div>
                                    <div class="last-message">求人情報をお送りします</div>
                                </div>
                                <div class="chat-meta">
                                    <div class="chat-time">2日前</div>
                                </div>
                            </div>
                            
                            <div class="chat-item" onclick="selectChat('support')">
                                <div class="consultant-avatar">
                                    <i class="fas fa-headset"></i>
                                    <div class="online-status"></div>
                                </div>
                                <div class="chat-info">
                                    <div class="consultant-name">サポートチーム</div>
                                    <div class="last-message">何かご不明な点はありますか？</div>
                                </div>
                                <div class="chat-meta">
                                    <div class="chat-time">3日前</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- メインチャット -->
                    <div class="main-chat" id="main-chat">
                        <div class="chat-header">
                            <div class="current-consultant">
                                <div class="current-consultant-avatar">
                                    <i class="fas fa-user-tie"></i>
                                    <div class="online-status"></div>
                                </div>
                                <div class="consultant-details">
                                    <h3>佐藤 美咲</h3>
                                    <div class="consultant-status">
                                        <div class="online-status" style="position: static; margin: 0;"></div>
                                        オンライン
                                    </div>
                                </div>
                            </div>
                            <div class="chat-actions">
                                <button class="action-btn" onclick="startVideoCall()" title="ビデオ通話">
                                    <i class="fas fa-video"></i>
                                </button>
                                <button class="action-btn" onclick="scheduleAppointment()" title="面談予約">
                                    <i class="fas fa-calendar"></i>
                                </button>
                                <button class="action-btn" onclick="shareDocument()" title="資料共有">
                                    <i class="fas fa-file-share"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="chat-messages" id="chat-messages">
                            <div class="message">
                                <div class="message-avatar">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div class="message-content">
                                    <div class="message-bubble">
                                        こんにちは、田中様！キャリアコンサルタントの佐藤です。本日はお疲れ様でした。
                                    </div>
                                    <div class="message-time">13:45</div>
                                </div>
                            </div>
                            
                            <div class="message">
                                <div class="message-avatar">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div class="message-content">
                                    <div class="message-bubble">
                                        履歴書の添削が完了いたしました。いくつか改善点がございますので、ご確認ください。
                                    </div>
                                    <div class="message-time">13:46</div>
                                </div>
                            </div>
                            
                            <div class="message own">
                                <div class="message-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="message-content">
                                    <div class="message-bubble">
                                        ありがとうございます！具体的にはどのような点を改善すればよろしいでしょうか？
                                    </div>
                                    <div class="message-time">14:15</div>
                                </div>
                            </div>
                            
                            <div class="message">
                                <div class="message-avatar">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div class="message-content">
                                    <div class="message-bubble">
                                        主に3つのポイントがあります：<br>
                                        1. プロジェクトマネジメント経験をより具体的に記載<br>
                                        2. 英語力の証明となる実績の追加<br>
                                        3. 製造業での技術的成果を数値化
                                    </div>
                                    <div class="message-time">14:30</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-area">
                            <div class="quick-responses">
                                <button class="quick-response" onclick="insertQuickResponse('ありがとうございます')">ありがとうございます</button>
                                <button class="quick-response" onclick="insertQuickResponse('詳細を教えてください')">詳細を教えてください</button>
                                <button class="quick-response" onclick="insertQuickResponse('面談の予約をお願いします')">面談予約</button>
                                <button class="quick-response" onclick="insertQuickResponse('資料を送ってください')">資料送付依頼</button>
                            </div>
                            
                            <div class="chat-input-container">
                                <div class="chat-attachments">
                                    <button class="attachment-btn" onclick="attachFile()" title="ファイル添付">
                                        <i class="fas fa-paperclip"></i>
                                    </button>
                                    <button class="attachment-btn" onclick="attachImage()" title="画像添付">
                                        <i class="fas fa-image"></i>
                                    </button>
                                    <button class="attachment-btn" onclick="attachDocument()" title="文書添付">
                                        <i class="fas fa-file"></i>
                                    </button>
                                </div>
                                <textarea 
                                    class="chat-input" 
                                    id="message-input" 
                                    placeholder="メッセージを入力..." 
                                    rows="1"
                                    onkeypress="handleKeyPress(event)"
                                    oninput="autoResize(this)"
                                ></textarea>
                                <button class="send-btn" id="send-btn" onclick="sendMessage()">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- チャットオーバーレイ（モバイル用） -->
    <div class="chat-overlay" id="chat-overlay" onclick="toggleChatList()"></div>
    
    <!-- フッター -->
    <footer id="site-footer">
        <div class="footer-main">
            <div class="container">
                <div class="footer-columns">
                    <!-- サイトマップ -->
                    <div class="footer-column">
                        <h3>サイトマップ</h3>
                        <ul>
                            <li><a href="../jobs/search.html">求人を探す</a></li>
                            <li><a href="../services/index.html">転職支援サービス</a></li>
                            <li><a href="../knowhow/index.html">外資系・製造業転職ノウハウ</a></li>
                            <li><a href="../success_stories/index.html">転職成功事例</a></li>
                            <li><a href="../recruiters/index.html">企業様へ</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>職種別求人</h3>
                        <ul>
                            <li><a href="../jobs/search.html?category=engineering">エンジニアリング</a></li>
                            <li><a href="../jobs/search.html?category=rd">研究開発（R&D）</a></li>
                            <li><a href="../jobs/search.html?category=production">生産管理</a></li>
                            <li><a href="../jobs/search.html?category=scm">サプライチェーン（SCM）</a></li>
                            <li><a href="../jobs/search.html?category=qaqc">品質管理（QA/QC）</a></li>
                            <li><a href="../jobs/search.html?category=sales">セールス/マーケティング</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>業種別求人</h3>
                        <ul>
                            <li><a href="../jobs/search.html?industry=automotive">自動車・輸送機器</a></li>
                            <li><a href="../jobs/search.html?industry=aerospace">航空宇宙</a></li>
                            <li><a href="../jobs/search.html?industry=electronics">電機・電子</a></li>
                            <li><a href="../jobs/search.html?industry=machinery">産業機械</a></li>
                            <li><a href="../jobs/search.html?industry=chemical">化学・素材</a></li>
                            <li><a href="../jobs/search.html?industry=medical">医療機器</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>会社情報</h3>
                        <ul>
                            <li><a href="../corporate/about.html">会社概要</a></li>
                            <li><a href="../contact/index.html">お問い合わせ</a></li>
                            <li><a href="../faq/index.html">よくある質問</a></li>
                            <li><a href="../legal/privacy.html">プライバシーポリシー</a></li>
                            <li><a href="../legal/terms.html">利用規約</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="container">
                <div class="footer-bottom-content">
                    <div class="copyright">
                        <p>&copy; 2025 Global Manufacturing Careers. All Rights Reserved.</p>
                    </div>
                    <div class="social-links">
                        <a href="#" aria-label="LinkedIn"><img src="../images/icons/linkedin_icon.svg" alt="LinkedIn" loading="lazy"></a>
                        <a href="#" aria-label="Twitter"><img src="../images/icons/twitter_icon.svg" alt="Twitter" loading="lazy"></a>
                        <a href="#" aria-label="Facebook"><img src="../images/icons/facebook_icon.svg" alt="Facebook" loading="lazy"></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
    <script>
        let currentChat = 'consultant1';
        let isTyping = false;
        
        // チャット選択
        function selectChat(chatId) {
            // アクティブ状態更新
            document.querySelectorAll('.chat-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            currentChat = chatId;
            loadChatMessages(chatId);
            
            // 未読バッジを削除
            const unreadBadge = event.currentTarget.querySelector('.unread-badge');
            if (unreadBadge) {
                unreadBadge.remove();
            }
        }
        
        // チャットメッセージ読み込み
        function loadChatMessages(chatId) {
            const messagesContainer = document.getElementById('chat-messages');
            const chatData = getChatData(chatId);
            
            // ヘッダー更新
            updateChatHeader(chatData.consultant);
            
            // メッセージ表示
            messagesContainer.innerHTML = '';
            chatData.messages.forEach(message => {
                addMessageToChat(message, false);
            });
            
            // 最下部にスクロール
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // チャットデータ取得
        function getChatData(chatId) {
            const chatDatabase = {
                consultant1: {
                    consultant: {
                        name: '佐藤 美咲',
                        status: 'online',
                        avatar: 'fas fa-user-tie'
                    },
                    messages: [
                        {
                            type: 'received',
                            content: 'こんにちは、田中様！キャリアコンサルタントの佐藤です。本日はお疲れ様でした。',
                            time: '13:45'
                        },
                        {
                            type: 'received',
                            content: '履歴書の添削が完了いたしました。いくつか改善点がございますので、ご確認ください。',
                            time: '13:46'
                        },
                        {
                            type: 'sent',
                            content: 'ありがとうございます！具体的にはどのような点を改善すればよろしいでしょうか？',
                            time: '14:15'
                        },
                        {
                            type: 'received',
                            content: '主に3つのポイントがあります：\n1. プロジェクトマネジメント経験をより具体的に記載\n2. 英語力の証明となる実績の追加\n3. 製造業での技術的成果を数値化',
                            time: '14:30'
                        }
                    ]
                },
                consultant2: {
                    consultant: {
                        name: '田村 健一',
                        status: 'online',
                        avatar: 'fas fa-user-tie'
                    },
                    messages: [
                        {
                            type: 'received',
                            content: 'こんにちは！面接対策について相談しましょう。',
                            time: '昨日'
                        }
                    ]
                },
                support: {
                    consultant: {
                        name: 'サポートチーム',
                        status: 'online',
                        avatar: 'fas fa-headset'
                    },
                    messages: [
                        {
                            type: 'received',
                            content: 'こんにちは！何かご不明な点はありますか？',
                            time: '3日前'
                        }
                    ]
                }
            };
            
            return chatDatabase[chatId] || chatDatabase.consultant1;
        }
        
        // チャットヘッダー更新
        function updateChatHeader(consultant) {
            const headerElement = document.querySelector('.current-consultant');
            const avatar = headerElement.querySelector('i');
            const name = headerElement.querySelector('h3');
            const status = headerElement.querySelector('.consultant-status');
            
            avatar.className = consultant.avatar;
            name.textContent = consultant.name;
            
            if (consultant.status === 'online') {
                status.innerHTML = '<div class="online-status" style="position: static; margin: 0;"></div>オンライン';
            } else {
                status.innerHTML = 'オフライン';
            }
        }
        
        // メッセージ送信
        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            // メッセージを追加
            addMessageToChat({
                type: 'sent',
                content: message,
                time: getCurrentTime()
            });
            
            // 入力欄をクリア
            input.value = '';
            autoResize(input);
            
            // 相手の返信をシミュレート
            simulateResponse();
        }
        
        // メッセージをチャットに追加
        function addMessageToChat(message, animate = true) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageElement = document.createElement('div');
            messageElement.className = `message ${message.type === 'sent' ? 'own' : ''}`;
            
            const avatarIcon = message.type === 'sent' ? 'fas fa-user' : 'fas fa-user-tie';
            
            messageElement.innerHTML = `
                <div class="message-avatar">
                    <i class="${avatarIcon}"></i>
                </div>
                <div class="message-content">
                    <div class="message-bubble">${message.content.replace(/\n/g, '<br>')}</div>
                    <div class="message-time">${message.time}</div>
                </div>
            `;
            
            messagesContainer.appendChild(messageElement);
            
            if (animate) {
                messageElement.style.opacity = '0';
                messageElement.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    messageElement.style.opacity = '1';
                    messageElement.style.transform = 'translateY(0)';
                    messageElement.style.transition = 'all 0.3s ease';
                }, 50);
            }
            
            // 最下部にスクロール
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // 現在時刻取得
        function getCurrentTime() {
            const now = new Date();
            return now.getHours().toString().padStart(2, '0') + ':' + 
                   now.getMinutes().toString().padStart(2, '0');
        }
        
        // 相手の返信シミュレート
        function simulateResponse() {
            const responses = [
                'ありがとうございます。その点について詳しく説明させていただきます。',
                'とても良い質問ですね。私の経験から申し上げますと...',
                'そちらの件については、こちらの資料をご参照ください。',
                'では、次のステップについて相談しましょう。',
                'ご理解いただき、ありがとうございます。'
            ];
            
            // タイピングインジケーター表示
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                addMessageToChat({
                    type: 'received',
                    content: randomResponse,
                    time: getCurrentTime()
                });
            }, 2000 + Math.random() * 2000); // 2-4秒でランダム
        }
        
        // タイピングインジケーター表示
        function showTypingIndicator() {
            if (isTyping) return;
            
            const messagesContainer = document.getElementById('chat-messages');
            const typingElement = document.createElement('div');
            typingElement.className = 'message';
            typingElement.id = 'typing-indicator';
            typingElement.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-user-tie"></i>
                </div>
                <div class="message-content">
                    <div class="message-bubble">
                        <div class="typing-animation">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(typingElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            isTyping = true;
        }
        
        // タイピングインジケーター非表示
        function hideTypingIndicator() {
            const typingElement = document.getElementById('typing-indicator');
            if (typingElement) {
                typingElement.remove();
            }
            isTyping = false;
        }
        
        // キー入力処理
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }
        
        // テキストエリア自動リサイズ
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 100) + 'px';
        }
        
        // クイックレスポンス挿入
        function insertQuickResponse(text) {
            const input = document.getElementById('message-input');
            input.value = text;
            autoResize(input);
            input.focus();
        }
        
        // 新しいチャット開始
        function startNewChat() {
            showToast('新しいチャットを開始しました', 'success');
        }
        
        // ビデオ通話開始
        function startVideoCall() {
            showToast('ビデオ通話を開始します...', 'info');
            setTimeout(() => {
                window.open('video-meeting.html', '_blank');
            }, 1000);
        }
        
        // 面談予約
        function scheduleAppointment() {
            showToast('面談予約ページを開きます...', 'info');
            setTimeout(() => {
                window.location.href = 'video-meeting.html#schedule-tab';
            }, 1000);
        }
        
        // 資料共有
        function shareDocument() {
            showToast('資料共有機能を準備中です', 'info');
        }
        
        // ファイル添付
        function attachFile() {
            showToast('ファイル添付機能を準備中です', 'info');
        }
        
        function attachImage() {
            showToast('画像添付機能を準備中です', 'info');
        }
        
        function attachDocument() {
            showToast('文書添付機能を準備中です', 'info');
        }
        
        // チャットリストトグル（モバイル用）
        function toggleChatList() {
            const chatList = document.getElementById('chat-list');
            const overlay = document.getElementById('chat-overlay');
            
            chatList.classList.toggle('active');
            overlay.classList.toggle('active');
        }
        
        // トースト通知表示
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#34c759' : type === 'error' ? '#ff3b30' : '#0066CC'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                z-index: 1001;
                transform: translateX(400px);
                transition: transform 0.3s ease;
                max-width: 300px;
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            // アニメーション
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);
            
            // 3秒後に削除
            setTimeout(() => {
                toast.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    if (document.body.contains(toast)) {
                        document.body.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }
        
        // ページロード時の初期化
        document.addEventListener('DOMContentLoaded', function() {
            // 初期チャット読み込み
            loadChatMessages(currentChat);
            
            // チャット検索機能
            const searchInput = document.querySelector('.search-input');
            searchInput.addEventListener('input', function() {
                const query = this.value.toLowerCase();
                const chatItems = document.querySelectorAll('.chat-item');
                
                chatItems.forEach(item => {
                    const name = item.querySelector('.consultant-name').textContent.toLowerCase();
                    const message = item.querySelector('.last-message').textContent.toLowerCase();
                    
                    if (name.includes(query) || message.includes(query)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        });
    </script>
    
    <script src="../js/bundle.js" defer></script>
</body>
</html>